class ProgrammLog {
    private $eintraege;
    private $logVerzeichnis;
    private $logDatei;

    public function __construct() {
        $this->eintraege = array();
        $this->logVerzeichnis = $_SERVER['HOME'] . '/Programm Logger';
        $this->logDatei = $this->logVerzeichnis . '/' . date('Y-m-d') . '.log';

        if (!file_exists($this->logVerzeichnis)) {
            mkdir($this->logVerzeichnis, 0777, true);
        }
    }

    public function addEintrag(ProgrammEintrag $eintrag) {
        $this->eintraege[] = $eintrag;
    }

    public function getEintraege() {
        return $this->eintraege;
    }

    public function schreibeLog() {
        $logInhalt = '';
        foreach ($this->eintraege as $eintrag) {
            $logInhalt .= "Programm: " . $eintrag->getProgrammName() . "\n";
            $logInhalt .= "Prozess-ID: " . $eintrag->getProzessId() . "\n";
            $logInhalt .= "Startzeit: " . $eintrag->getStartzeit() . "\n";
            $logInhalt .= "Endzeit: " . $eintrag->getEndzeit() . "\n";
            $logInhalt .= "Benutzer: " . $eintrag->getBenutzer() . "\n";
            $logInhalt .= "Kommandozeile: " . $eintrag->getKommandozeile() . "\n\n";
        }

        file_put_contents($this->logDatei, $logInhalt, FILE_APPEND);
    }
}

class ProgrammEintrag {
    private $programmName;
    private $prozessId;
    private $startzeit;
    private $endzeit;
    private $benutzer;
    private $kommandozeile;

    public function __construct($programmName, $prozessId, $startzeit, $benutzer, $kommandozeile) {
        $this->programmName = $programmName;
        $this->prozessId = $prozessId;
        $this->startzeit = $startzeit;
        $this->benutzer = $benutzer;
        $this->kommandozeile = $kommandozeile;
    }

    public function getProgrammName() {
        return $this->programmName;
    }

    public function getProzessId() {
        return $this->prozessId;
    }

    public function getStartzeit() {
        return $this->startzeit;
    }

    public function getEndzeit() {
        return $this->endzeit;
    }

    public function setEndzeit($endzeit) {
        $this->endzeit = $endzeit;
    }

    public function getBenutzer() {
        return $this->benutzer;
    }

    public function getKommandozeile() {
        return $this->kommandozeile;
    }
}

$log = new ProgrammLog();

$eintrag = new ProgrammEintrag("Google Chrome", 1234, time(), "Max Mustermann", "C:\\Program Files\\Google\\Chrome\\chrome.exe");
$log->addEintrag($eintrag);

$log->schreibeLog();